"use strict";(globalThis["webpackChunklive_frame_webapp"]=globalThis["webpackChunklive_frame_webapp"]||[]).push([[15],{4015:(e,s,t)=>{t.r(s),t.d(s,{default:()=>E});var o=t(9835),a=t(6970);const r={id:"login-box",class:"flex column q-gutter-y-lg",style:{"max-width":"500px",width:"90%"}},i=(0,o._)("div",{class:"text-h2"},"Sign in",-1),l={id:"login-options",class:"flex column q-gutter-y-md"},n=(0,o._)("span",{class:"q-ml-md text-weight-light"},"Sign in with",-1),d=(0,o._)("div",{id:"spacer",class:"q-mt-xl"},[(0,o._)("hr"),(0,o._)("div",null,[(0,o._)("span",{class:"text-italic text-subtitle1"},"Or")])],-1),c={class:"q-mt-xl flex flex-center"};function u(e,s,t,u,m,p){const h=(0,o.up)("q-btn"),w=(0,o.up)("user-login-form"),g=(0,o.up)("q-checkbox"),b=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(b,{padding:"",class:"flex column flex-center"},{default:(0,o.w5)((()=>[(0,o._)("div",r,[i,(0,o._)("div",l,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.providers,(s=>((0,o.wg)(),(0,o.j4)(h,{size:"lg",color:"primary",align:"left",icon:"login","no-caps":"",key:s.name,onClick:()=>e.useProvider(s.class)},{default:(0,o.w5)((()=>[n,(0,o.Uk)("Â "+(0,a.zw)(s.name),1)])),_:2},1032,["onClick"])))),128)),d,(0,o.Wm)(w,{onSuccess:e.onLogin,"create-account-mode":e.createAccountMode},null,8,["onSuccess","create-account-mode"])])]),(0,o._)("div",c,[(0,o.Uk)("Don't have an account?"),(0,o.Wm)(g,{dense:"",modelValue:e.createAccountMode,"onUpdate:modelValue":s[0]||(s[0]=s=>e.createAccountMode=s),class:"q-ml-md",color:"secondary",label:"Register Now!"},null,8,["modelValue"])])])),_:1})}var m=t(5099),p=t(3830),h=t(1957);const w={style:{position:"relative"}},g={key:0,class:"text-negative q-my-md text-bold bg-negative text-white q-py-md q-px-sm rounded-borders"};function b(e,s,t,r,i,l){const n=(0,o.up)("q-icon"),d=(0,o.up)("q-input"),c=(0,o.up)("q-btn"),u=(0,o.up)("q-form");return(0,o.wg)(),(0,o.iD)("div",w,[(0,o.Wm)(u,{ref:"form",onSubmit:(0,h.iM)(e.onSubmit,["prevent"]),class:"fit q-gutter-y-md q-px-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{ref:"emailInput",label:"Email address","lazy-rules":"",rules:[e=>!!e||"Field is required"],modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=s=>e.email=s),type:"email"},{append:(0,o.w5)((()=>[(0,o.Wm)(n,{size:".75em",name:"email"})])),_:1},8,["rules","modelValue"]),(0,o.Wm)(d,{label:"Password",type:e.passwordVisible?"text":"password",rules:[e=>!!e||"Field is required",s=>!e.createAccountMode||(null===s||void 0===s?void 0:s.length)>=6||"Password should be at least 6 characters"],modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=s=>e.password=s)},{append:(0,o.w5)((()=>[(0,o.Wm)(n,{size:".75em",name:e.passwordVisible?"visibility":"visibility_off",class:"cursor-pointer",onClick:s[1]||(s[1]=s=>e.passwordVisible=!e.passwordVisible)},null,8,["name"])])),_:1},8,["type","rules","modelValue"]),(0,o._)("div",{style:(0,a.j5)({transform:e.createAccountMode?"":"scale(0)"})},[(0,o.Wm)(d,{label:"Password confirm",type:e.passwordVisible?"text":"password",rules:[s=>!e.createAccountMode||!!s||"Field is required",s=>!e.createAccountMode||s===e.password||"Passwords don't match"],"reactive-rules":"",modelValue:e.passwordConfirm,"onUpdate:modelValue":s[3]||(s[3]=s=>e.passwordConfirm=s)},null,8,["type","rules","modelValue"])],4),(0,o.Wm)(c,{label:e.createAccountMode?"Register":"Sign in",color:"secondary",class:"full-width q-mt-lg",type:"submit"},null,8,["label"]),e.errorMessage?((0,o.wg)(),(0,o.iD)("div",g,(0,a.zw)(e.errorMessage),1)):(0,o.kq)("",!0)])),_:1},8,["onSubmit"])])}function f(e){switch(e.code){case"auth/email-already-in-use":return"There already exists an account with the given email address";case"auth/invalid-email":return"The email address is not valid";case"auth/operation-not-allowed":return"Email/password accounts are not enabled";case"auth/weak-password":return"The password is not strong enough";case"auth/account-exists-with-different-credential":return"There already exists an account with the email address asserted by the credential";case"auth/invalid-credential":return"The credential is malformed or has expired";case"auth/operation-not-allowed":return"The type of account corresponding to the credential is not enabled";case"auth/user-disabled":return"This account has been disabled";case"auth/user-not-found":return"User not found";case"auth/wrong-password":return"User/password don't match"}return e.message}const v=(0,o.aZ)({props:{createAccountMode:{type:Boolean,default:!1}},emits:["success","error"],setup(){const e=(0,p.K)();return{firebaseStore:e}},data(){return{email:"",password:"",passwordConfirm:"",passwordVisible:!1,errorMessage:""}},methods:{onSubmit(){const e=this.email,s=this.password,t=this.passwordConfirm;if(this.errorMessage="",this.createAccountMode&&s!==t)return void(this.errorMessage="Passwords don't match.");const o=this.createAccountMode?m.Xb:m.e5;o(this.firebaseStore.authentication,e,s).then((e=>{this.$emit("success",e)})).catch((e=>{console.debug(e),this.errorMessage=`Error: ${f(e)}`,this.emailInput.focus(),this.password="",this.passwordConfirm="",this.form.reset(),this.$emit("error",e)}))}},computed:{emailInput(){return this.$refs["emailInput"]},form(){return this.$refs["form"]}}});var q=t(1639),y=t(8326),_=t(4152),x=t(2857),V=t(4455),C=t(9984),k=t.n(C);const M=(0,q.Z)(v,[["render",b],["__scopeId","data-v-7ed84f42"]]),W=M;k()(v,"components",{QForm:y.Z,QInput:_.Z,QIcon:x.Z,QBtn:V.Z});const Z=(0,o._)("div",{class:"text-h4"},"Register account",-1),S={key:0,style:{"border-bottom":"1px solid var(--q-negative)"},class:"text-negative q-mt-none q-mb-md"},Q={class:"q-gutter-x-md"};function U(e,s,t,r,i,l){const n=(0,o.up)("q-card-section"),d=(0,o.up)("q-icon"),c=(0,o.up)("q-input"),u=(0,o.up)("q-btn"),m=(0,o.up)("q-card-actions"),p=(0,o.up)("q-form"),w=(0,o.up)("q-card"),g=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(g,{ref:"dialog",onHide:e.onDialogHide},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"q-dialog-plugin q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{ref:"form",onSubmit:(0,h.iM)(e.onSubmit,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{class:"q-px-md q-mt-md"},{default:(0,o.w5)((()=>[Z])),_:1}),(0,o.Wm)(n,{class:"q-px-md q-mt-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{ref:"emailInput",label:"Email address","lazy-rules":"",rules:[e=>!!e||""],modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=s=>e.email=s),type:"email"},{append:(0,o.w5)((()=>[(0,o.Wm)(d,{size:".8em",name:"email"})])),_:1},8,["rules","modelValue"]),(0,o.Wm)(c,{"stack-label":"",label:"Password",class:"q-mt-sm",type:e.passwordVisible?"text":"password",rules:[e=>!!e||""],modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=s=>e.password=s)},{append:(0,o.w5)((()=>[(0,o.Wm)(d,{size:".8em",name:e.passwordVisible?"visibility":"visibility_off",class:"cursor-pointer",onClick:s[1]||(s[1]=s=>e.passwordVisible=!e.passwordVisible)},null,8,["name"])])),_:1},8,["type","rules","modelValue"]),(0,o.Wm)(c,{"stack-label":"",label:"Confirm password",type:e.passwordVisible?"text":"password",rules:[e=>!!e||""],modelValue:e.passwordConfirm,"onUpdate:modelValue":s[4]||(s[4]=s=>e.passwordConfirm=s)},{append:(0,o.w5)((()=>[(0,o.Wm)(d,{size:".8em",name:e.passwordVisible?"visibility":"visibility_off",class:"cursor-pointer",onClick:s[3]||(s[3]=s=>e.passwordVisible=!e.passwordVisible)},null,8,["name"])])),_:1},8,["type","rules","modelValue"])])),_:1}),(0,o.Wm)(n,{class:""},{default:(0,o.w5)((()=>[e.errorMessage?((0,o.wg)(),(0,o.iD)("div",S,(0,a.zw)(e.errorMessage),1)):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(m,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",Q,[(0,o.Wm)(u,{color:"negative",outline:"",label:"Cancel",onClick:e.onCancelClick},null,8,["onClick"]),(0,o.Wm)(u,{color:"primary",label:"Register",type:"submit"})])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["onHide"])}const A=(0,o.aZ)({emits:["ok","hide"],setup(){const e=(0,p.K)();return{firebaseStore:e}},data(){return{email:"",password:"",passwordConfirm:"",errorMessage:"",passwordVisible:!1}},computed:{dialog(){const e=this.$refs;return e["dialog"]}},methods:{show(){this.dialog.show()},hide(){this.dialog.hide()},onDialogHide(){this.$emit("hide")},onSubmit(){this.errorMessage="";const e=this.firebaseStore.authentication;this.password===this.passwordConfirm?(0,m.Xb)(e,this.email,this.password).then((e=>{const s=e.user;console.log(s)})).catch((e=>{const s=e.code,t=e.message;console.log(s,t)})):this.errorMessage="Passwords don't match."},onOKClick(){this.$emit("ok"),this.hide()},onCancelClick(){this.hide()}}});var P=t(1365),$=t(4458),z=t(3190),I=t(1821);const T=(0,q.Z)(A,[["render",U]]),D=T;k()(A,"components",{QDialog:P.Z,QCard:$.Z,QForm:y.Z,QCardSection:z.Z,QInput:_.Z,QIcon:x.Z,QCardActions:I.Z,QBtn:V.Z});const F=[{name:"Google",class:m.hJ},{name:"Facebook",class:m._O}],H=(0,o.aZ)({components:{UserLoginForm:W},setup(){const e=(0,p.K)();return{firebaseStore:e,providers:F}},data(){return{createAccountMode:!1}},methods:{useProvider(e){const s=new e;s.setCustomParameters({prompt:"select_account"}),this.$q.loading.show({}),setTimeout((()=>{(0,m.rh)(this.firebaseStore.authentication,s).then((()=>{this.onLogin()})).catch((e=>{const s=e.code,t=e.message;console.error(s,t)})).finally((()=>this.$q.loading.hide()))}),800)},onLogin(){this.$router.push({name:"UploadImagePage"})},registerUser(){this.$q.dialog({component:D,componentProps:{}})}}});var K=t(9885),j=t(1221);const B=(0,q.Z)(H,[["render",u]]),E=B;k()(H,"components",{QPage:K.Z,QBtn:V.Z,QCheckbox:j.Z})}}]);