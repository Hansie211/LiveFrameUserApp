"use strict";(globalThis["webpackChunklive_frame_webapp"]=globalThis["webpackChunklive_frame_webapp"]||[]).push([[245],{3245:(e,t,o)=>{o.r(t),o.d(t,{default:()=>B});var a=o(9835),s=o(6970);const i={class:"flex column q-gutter-y-lg",style:{"max-width":"500px",width:"90%"}},r=(0,a._)("div",{class:"text-h2"},"Sign in",-1),n={key:0,class:"text-negative q-mt-xl q-mb-none text-bold bg-negative text-white q-py-md q-px-sm rounded-borders"},l={class:"flex column q-gutter-y-md q-mt-md"},d=(0,a._)("span",{class:"q-ml-md text-weight-light"},"Sign in with",-1),c=(0,a._)("span",{class:"q-ml-md text-weight-light"},"Sign in with",-1);function u(e,t,o,u,m,p){const h=(0,a.up)("q-icon"),g=(0,a.up)("q-item-section"),w=(0,a.up)("q-item"),f=(0,a.up)("user-login-form"),b=(0,a.up)("q-card"),q=(0,a.up)("q-expansion-item"),x=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(x,{padding:"",class:"flex column items-center q-pt-xl"},{default:(0,a.w5)((()=>[(0,a._)("div",i,[r,e.errorMessage?((0,a.wg)(),(0,a.iD)("div",n,(0,s.zw)(e.errorMessage),1)):(0,a.kq)("",!0),(0,a._)("div",l,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.providers,(t=>((0,a.wg)(),(0,a.j4)(w,{key:t.name,class:"bg-primary",clickable:"",onClick:()=>e.useProvider(t.class)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{color:"white",name:"mdi-login",size:"lg"})])),_:1}),(0,a.Wm)(g,{style:{"flex-wrap":"nowrap","flex-direction":"row","justify-content":"flex-start","align-items":"center"},class:"text-h6 text-white"},{default:(0,a.w5)((()=>[d,(0,a.Uk)(" "+(0,s.zw)(t.name),1)])),_:2},1024),(0,a.Wm)(g,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{color:"white",name:t.logoName,size:"md"},null,8,["name"])])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(0,a.Wm)(q,{"header-class":"bg-primary","expand-icon-class":"text-white","expand-icon":"mdi-email","expanded-icon":"mdi-email"},{header:(0,a.w5)((()=>[(0,a.Wm)(g,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{color:"white",name:"mdi-login",size:"lg"})])),_:1}),(0,a.Wm)(g,{style:{"flex-wrap":"nowrap","flex-direction":"row","justify-content":"flex-start","align-items":"center"},class:"text-h6 text-white"},{default:(0,a.w5)((()=>[c,(0,a.Uk)(" Email")])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"q-py-xl",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{onSuccess:e.onLogin,onError:e.onError},null,8,["onSuccess","onError"])])),_:1})])),_:1})])])])),_:1})}var m=o(5099),p=o(3830),h=o(1957);const g={style:{position:"relative"}},w={class:"q-mt-xl flex flex-center"};function f(e,t,o,i,r,n){const l=(0,a.up)("q-icon"),d=(0,a.up)("q-input"),c=(0,a.up)("q-btn"),u=(0,a.up)("q-toggle"),m=(0,a.up)("q-form");return(0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(m,{ref:"form",onSubmit:(0,h.iM)(e.onSubmit,["prevent"]),class:"fit q-gutter-y-md q-px-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{ref:"emailInput",label:"Email address","lazy-rules":"",rules:[e=>!!e||"Field is required"],modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.email=t),type:"email","no-error-icon":""},{append:(0,a.w5)((()=>[(0,a.Wm)(l,{size:".75em",name:"mdi-email"})])),_:1},8,["rules","modelValue"]),(0,a.Wm)(d,{label:"Password",type:e.passwordVisible?"text":"password",rules:[e=>!!e||"Field is required",t=>!e.createAccountMode||(null===t||void 0===t?void 0:t.length)>=6||"Password should be at least 6 characters"],modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t),"no-error-icon":""},{append:(0,a.w5)((()=>[(0,a.Wm)(l,{size:".75em",name:e.passwordVisible?"mdi-eye":"mdi-eye-off",class:"cursor-pointer",onClick:t[1]||(t[1]=t=>e.passwordVisible=!e.passwordVisible)},null,8,["name"])])),_:1},8,["type","rules","modelValue"]),(0,a._)("div",{style:(0,s.j5)({transform:e.createAccountMode?"":"scale(0)"})},[(0,a.Wm)(d,{label:"Password confirm",type:e.passwordVisible?"text":"password",rules:[t=>!e.createAccountMode||!!t||"Field is required",t=>!e.createAccountMode||t===e.password||"Passwords don't match"],"reactive-rules":"",modelValue:e.passwordConfirm,"onUpdate:modelValue":t[3]||(t[3]=t=>e.passwordConfirm=t),"no-error-icon":""},null,8,["type","rules","modelValue"])],4),(0,a.Wm)(c,{label:e.createAccountMode?"Register":"Sign in",color:"secondary",class:"full-width q-mt-lg",type:"submit"},null,8,["label"]),(0,a.Wm)(c,{label:"I forgot my password",flat:"","no-caps":"",dense:"",padding:"none md",onClick:e.onPasswordForgotClick},null,8,["onClick"]),(0,a._)("div",w,[(0,a.Wm)(u,{dense:"",modelValue:e.createAccountMode,"onUpdate:modelValue":t[4]||(t[4]=t=>e.createAccountMode=t),class:"q-ml-md",color:"secondary",label:"Create account"},null,8,["modelValue"])])])),_:1},8,["onSubmit"])])}const b=(0,a._)("div",{class:"text-h5 q-mb-md"},"Password forgotten",-1),q={key:0,class:"text-negative q-my-md text-bold bg-negative text-white q-py-md q-px-sm rounded-borders"},x={align:"right"};function y(e,t,o,i,r,n){const l=(0,a.up)("q-icon"),d=(0,a.up)("q-input"),c=(0,a.up)("q-btn"),u=(0,a.up)("q-card-section"),m=(0,a.up)("q-form"),p=(0,a.up)("q-card"),g=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(g,{ref:"dialog",onHide:e.onDialogHide},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"q-dialog-plugin q-pa-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{ref:"form",onSubmit:(0,h.iM)(e.onSubmit,["prevent"])},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[b,e.errorMessage?((0,a.wg)(),(0,a.iD)("div",q,(0,s.zw)(e.errorMessage),1)):(0,a.kq)("",!0),(0,a.Wm)(d,{"clear-icon":"q-mt-md",label:"Email address","lazy-rules":"",rules:[e=>!!e||"Field is required"],modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.email=t),type:"email","no-error-icon":""},{append:(0,a.w5)((()=>[(0,a.Wm)(l,{size:".75em",name:"mdi-email"})])),_:1},8,["rules","modelValue"]),(0,a._)("div",x,[(0,a.Wm)(c,{color:"primary",label:"Send recovery link",padding:"sm xl",type:"submit"})])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["onHide"])}var v=function(e,t,o,a){function s(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function r(e){try{l(a.next(e))}catch(t){i(t)}}function n(e){try{l(a["throw"](e))}catch(t){i(t)}}function l(e){e.done?o(e.value):s(e.value).then(r,n)}l((a=a.apply(e,t||[])).next())}))};const _=(0,a.aZ)({props:{initialEmail:{type:String,default:""}},setup(){const e=(0,p.K)(),t=e.authentication;return{authentication:t}},emits:["ok","hide"],data(){return{email:this.initialEmail,errorMessage:""}},computed:{dialog(){return this.$refs["dialog"]}},methods:{show(){this.dialog.show()},hide(){this.dialog.hide()},onDialogHide(){this.$emit("hide")},onSubmit(){return v(this,void 0,void 0,(function*(){(0,m.LS)(this.authentication,this.email).then((()=>{this.$q.dialog({title:"Recovery code sent",message:"Check your inbox. If the email address you provided is recognized, an email with a recovery link and instructions has been sent. Don't forget to also check your junk mail box."}).onDismiss((()=>{this.$emit("ok",this.email),this.hide()}))})).catch((e=>this.errorMessage=e.message))}))}}});var k=o(1639),W=o(4535),M=o(4458),Z=o(8326),S=o(3190),V=o(4152),C=o(2857),Q=o(4455),I=o(9984),P=o.n(I);const E=(0,k.Z)(_,[["render",y]]),z=E;P()(_,"components",{QDialog:W.Z,QCard:M.Z,QForm:Z.Z,QCardSection:S.Z,QInput:V.Z,QIcon:C.Z,QBtn:Q.Z});const $=(0,a.aZ)({emits:["success","error"],setup(){const e=(0,p.K)();return{firebaseStore:e}},data(){return{email:"",password:"",passwordConfirm:"",passwordVisible:!1,errorMessage:"",createAccountMode:!1}},methods:{onSubmit(){const e=this.email,t=this.password,o=this.passwordConfirm;if(this.errorMessage="",this.createAccountMode&&t!==o)return void(this.errorMessage="Passwords don't match.");const a=this.createAccountMode?m.Xb:m.e5;a(this.firebaseStore.authentication,e,t).then((e=>{this.$emit("success",e)})).catch((e=>{this.emailInput.focus(),this.password="",this.passwordConfirm="",this.form.reset(),this.$emit("error",e)}))},onPasswordForgotClick(){this.$q.dialog({component:z,componentProps:{initialEmail:this.email}}).onOk((e=>{this.email=e,this.createAccountMode=!1}))}},computed:{emailInput(){return this.$refs["emailInput"]},form(){return this.$refs["form"]}}});var A=o(3175);const T=(0,k.Z)($,[["render",f]]),U=T;function D(e){switch(e.code){case"auth/email-already-in-use":return"There already exists an account with the given email address";case"auth/invalid-email":return"The email address is not valid";case"auth/operation-not-allowed":return"Email/password accounts are not enabled";case"auth/weak-password":return"The password is not strong enough";case"auth/account-exists-with-different-credential":return"This email is already registered with a different authentication provider";case"auth/invalid-credential":return"The credential is malformed or has expired";case"auth/operation-not-allowed":return"The type of account corresponding to the credential is not enabled";case"auth/user-disabled":return"This account has been disabled";case"auth/user-not-found":return"User not found";case"auth/wrong-password":return"User/password don't match"}return e.message}P()($,"components",{QForm:Z.Z,QInput:V.Z,QIcon:C.Z,QBtn:Q.Z,QToggle:A.Z});const F=[{name:"Google",logoName:"mdi-google",class:m.hJ},{name:"Github",logoName:"mdi-github",class:m.GH}],j=(0,a.aZ)({components:{UserLoginForm:U},setup(){const e=(0,p.K)();return{firebaseStore:e,providers:F}},data(){return{errorMessage:""}},methods:{useProvider(e){const t=new e;t.setCustomParameters({prompt:"select_account"}),this.$q.loading.show({}),setTimeout((()=>{(0,m.rh)(this.firebaseStore.authentication,t).then((()=>{this.onLogin()})).catch(this.onError).finally((()=>this.$q.loading.hide()))}),800)},onError(e){console.error(e.code,e.message);const t=D(e);this.errorMessage=t},onLogin(){this.$router.push({name:"UploadImagePage"})}}});var H=o(9885),L=o(490),K=o(1233),G=o(1123);const N=(0,k.Z)(j,[["render",u]]),B=N;P()(j,"components",{QPage:H.Z,QItem:L.Z,QItemSection:K.Z,QIcon:C.Z,QExpansionItem:G.Z,QCard:M.Z})}}]);